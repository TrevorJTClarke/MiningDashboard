<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="shared-styles.html">

<dom-module id="tc-mining">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
        padding: 12px;
      }

      .jumbotron {
        background-color: #fff;
        border: 1px solid var(--theme-line-color);
        border-radius: 4px;
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        display: flex;
        flex-direction: column;
        margin: 12px;
        overflow: hidden;
        padding: 0px;
      }

      .jumbo-title {
        display: flex;
        padding: 0 20px;
      }
      .jumbo-title small {
        align-self: flex-end;
        display: block;
        font-weight: 600;
        line-height: 64pt;
      }
      .jumbo-title h1 {
        display: flex;
        margin: 0;
        font-size: 64pt;
        font-weight: 100;
      }
      .jumbo-title h1 span {
        align-self: flex-end;
        display: block;
        font-size: 12pt;
        line-height: 58pt;
        opacity: 0.4;
      }

      svg path {
        fill: white;
      }

      svg path.c3-area {
        opacity: 0.12;
      }

    </style>

    <iron-ajax
      auto
      url="http://localhost:1234/miner/zec/t1fcu6h82MDhMF1wEhTHfAd8FvMK8NNdG9x"
      params=''
      handle-as="json"
      on-response="handleResponse"
      debounce-duration="300"></iron-ajax>

    <div class="jumbotron">
      <div class="jumbo-title">
        <small>ZEC</small>
        <h1>8.872<span>938459</span></h1>
      </div>
      <div id="miningChart"></div>
    </div>

    <div class="card">
      <div class="card-header">
        <h4>Setup Miner</h4>
      </div>
      <div class="card-body">
        <div class="form">
          <input type="text">
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <h4>Workers</h4>
      </div>
      <div class="card-body items">
        <div class="item">
          <div class="item-status active"></div>
          <div class="item-body">
            <h3>palmer</h3>
            <p>Hashrate: <strong>1.9 kH/s</strong> (1.8 kH/s AVG)</p>
          </div>
          <div class="item-action">
            <h3>141 <small>Shares</small></h3>
            <p>Stale: <span>1</span>, Ratio: <span>0.72%</span></p>
          </div>
        </div>
      </div>
      <div class="card-footer">
        <h6>Updated: <span>15 minutes ago</span></h6>
      </div>
    </div>
  </template>

  <script>
    class TcMining extends Polymer.Element {

      static get is() { return 'tc-mining'; }

      ready () {
        super.ready()
        this.drawChart()
      }

      handleResponse (res) {
        console.log('res', res)
      }

      drawChart () {
        var chart = c3.generate({
            bindto: this.$.miningChart,
            data: {
                columns: [
                    ['data1',0.01031233,0.01078139,0.01009495,0.0101432,0.01000796,0.01053937,0.01020899,0.01005118,0.01054014,0.01032105,0.01003683,0.01050353,0.01006168,0.01061855,0.0105565,0.01035516,0.01044369,0.0103731,0.01042882,0.01006994,0.0108639,0.01005704,0.01083916,0.01059563,0.01087155,0.01176912,0.01152271,0.01007963,0.01032065,0.01084963,0.01093436,0.01036119,0.01003167,0.01042391,0.01177237,0.01022489,0.01015098,0.01072096,0.010048,0.01040806,0.01018551,0.01008978,0.01047271,0.01060309,0.01049518,0.01005183,0.01048791,0.01038695,0.01011795,0.01045133,0.01047204,0.01012246,0.01030494,0.01091579,0.01113425,0.01009437,0.01040536,0.01003474,0.01044816,0.01037721,0.0106122,0.0102007,0.01045508,0.01091554,0.01014288,0.01053619,0.01047706,0.01017212,0.01150107,0.01113828,0.01054713,0.01031726,0.01016701,0.01143975,0.01025703,0.01003458,0.01091703,0.01058639,0.01034978,0.01049354,0.01043276,0.01032782,0.01066473,0.01027303,0.0110659,0.0107229,0.01026572,0.01100564,0.01406229,0.01038001,0.01009637,0.01035679,0.01026264,0.01085008,0.01091388,0.01003084,0.01010409,0.0101149,0.01037209,0.0108935],
                    ['data2',0.00055849,0.0011015999999999999,0.00159159,0.00216004,0.00274912,0.0032940499999999998,0.00394682,0.004599590000000001,0.00518675,0.0057900700000000005,0.006393500000000001,0.006994230000000001,0.0075806300000000005,0.0081878,0.008639840000000001,0.009092770000000002,0.009545700000000002,0.010096150000000002,0.010646590000000001,0.01115697,0.01166733,0.01216536,0.01268334,0.01324317,0.01384195,0.01444057,0.01504266,0.01563351,0.01620321,0.016770109999999998,0.01733748,0.0179007,0.018473749999999997,0.019046239999999996,0.019618679999999996,0.020050619999999995,0.020758109999999996,0.021348959999999997,0.021760029999999996,0.022334339999999998,0.022918659999999997,0.023479429999999996,0.024044819999999995,0.024602379999999993,0.025149359999999992,0.02561973999999999,0.02617791999999999,0.02673607999999999,0.027285129999999987,0.027834169999999988,0.028378869999999987,0.028953659999999985,0.029528439999999986,0.030103219999999986,0.030627139999999987,0.031141929999999988,0.03171125999999999,0.032266649999999994,0.032832209999999994,0.03339779,0.033963349999999996,0.03452893,0.035057279999999996,0.03558615,0.03611503,0.0366687,0.03724441,0.03775211,0.038260789999999996,0.038838639999999994,0.03938633999999999,0.039857769999999994,0.04039271999999999,0.04091374999999999,0.04149181999999999,0.042049569999999994,0.042619609999999995,0.043144539999999995,0.04364841,0.04415226,0.04465611,0.04515998,0.045663850000000006,0.04620525,0.04674666,0.0473075,0.04788225,0.04845699,0.04903174,0.049525309999999996,0.05001952999999999,0.050514079999999996,0.05108309,0.0516521,0.05222111,0.05279014,0.05335804,0.053925930000000004,0.05449385,0.055061820000000004]
                ],
                types: {
                    data1: 'area',
                    data2: 'area'
                }
            },
            axis: {
              x: { show: false },
              y: { show: false }
            },
            grid: {
              x: { show: false },
              y: { show: false }
            },
            size: {
              // width: 800,
              height: 220
            },
            tooltip: {
              show: false
            },
            legend: {
              hide: true
            }
        });
      }
    }

    window.customElements.define(TcMining.is, TcMining);
  </script>
</dom-module>
